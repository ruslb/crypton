{"ast":null,"code":"var _jsxFileName = \"/Users/ruslan/Desktop/crypton/src/components/auth/index.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport LoginPage from \"./login\";\nimport RegisterPage from \"./register\";\nimport './style.scss';\nimport { Box } from \"@mui/material\";\nimport { instance } from \"../../utils/axios\";\nimport { useAppDispatch } from \"../../utils/hook\";\nimport { login } from \"../../store/slice/auth\";\nimport { AppErrors } from \"../../common/errors\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthRootComponent = () => {\n  _s();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [repeatPassword, setRepeatPassword] = useState('');\n  const [firstName, setFirstName] = useState('');\n  const [username, setUsername] = useState('');\n  const location = useLocation();\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (location.pathname === '/login') {\n      try {\n        const userData = {\n          email,\n          password\n        };\n        const user = await instance.post('auth/login', userData);\n        await dispatch(login(user.data));\n        navigate('/');\n      } catch (e) {\n        return e;\n      }\n    } else {\n      if (password === repeatPassword) {\n        try {\n          const userData = {\n            firstName,\n            username,\n            email,\n            password\n          };\n          const newUser = await instance.post('auth/register', userData);\n          await dispatch(login(newUser.data));\n          navigate('/');\n        } catch (e) {\n          console.log(e);\n          return e;\n        }\n      } else {\n        throw new Error(AppErrors.PasswordDoNotMatch);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"root\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"form\",\n      onSubmit: handleSubmit,\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        flexDirection: \"column\",\n        maxWidth: 640,\n        margin: \"auto\",\n        padding: 5,\n        borderRadius: 5,\n        boxShadow: '5px 5px 10px #ccc',\n        children: location.pathname === '/login' ? /*#__PURE__*/_jsxDEV(LoginPage, {\n          setEmail: setEmail,\n          setPassword: setPassword,\n          navigate: navigate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 31\n        }, this) : location.pathname === '/register' ? /*#__PURE__*/_jsxDEV(RegisterPage, {\n          setEmail: setEmail,\n          setPassword: setPassword,\n          setRepeatPassword: setRepeatPassword,\n          setFirstName: setFirstName,\n          setUsername: setUsername,\n          navigate: navigate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 35\n        }, this) : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 9\n  }, this);\n};\n_s(AuthRootComponent, \"AZ4RFdH86NKFgr4DUg9vFdspCts=\", false, function () {\n  return [useLocation, useAppDispatch, useNavigate];\n});\n_c = AuthRootComponent;\nexport default AuthRootComponent;\nvar _c;\n$RefreshReg$(_c, \"AuthRootComponent\");","map":{"version":3,"names":["React","useState","useLocation","useNavigate","LoginPage","RegisterPage","Box","instance","useAppDispatch","login","AppErrors","AuthRootComponent","email","setEmail","password","setPassword","repeatPassword","setRepeatPassword","firstName","setFirstName","username","setUsername","location","dispatch","navigate","handleSubmit","e","preventDefault","pathname","userData","user","post","data","newUser","console","log","Error","PasswordDoNotMatch"],"sources":["/Users/ruslan/Desktop/crypton/src/components/auth/index.tsx"],"sourcesContent":["import React, { useState} from 'react';\nimport {useLocation, useNavigate} from \"react-router-dom\";\nimport LoginPage from \"./login\";\nimport RegisterPage from \"./register\";\nimport './style.scss'\nimport {Box} from \"@mui/material\";\nimport {instance} from \"../../utils/axios\";\nimport {useAppDispatch} from \"../../utils/hook\";\nimport {login} from \"../../store/slice/auth\";\nimport {AppErrors} from \"../../common/errors\";\n\nconst AuthRootComponent: React.FC = (): JSX.Element => {\n    const [email, setEmail] = useState('')\n    const [password, setPassword] = useState('')\n    const [repeatPassword, setRepeatPassword] = useState('')\n    const [firstName, setFirstName] = useState('')\n    const [username, setUsername] = useState('')\n    const location = useLocation()\n    const dispatch = useAppDispatch()\n    const navigate = useNavigate()\n\n\n    const handleSubmit = async (e: { preventDefault: () => void; }) => {\n        e.preventDefault()\n        if (location.pathname === '/login') {\n            try {\n                const userData = {\n                    email,\n                    password\n                }\n                const user = await instance.post('auth/login', userData)\n                await dispatch(login(user.data))\n                navigate('/')\n            }catch (e) {\n                return e\n            }\n        } else {\n            if (password === repeatPassword) {\n                try {\n                    const userData = {\n                        firstName,\n                        username,\n                        email,\n                        password\n                    }\n                    const newUser = await instance.post('auth/register', userData)\n                    await dispatch(login(newUser.data))\n                    navigate('/')\n                }catch (e) {\n                    console.log(e)\n                    return e\n                }\n            } else {\n                throw new Error(AppErrors.PasswordDoNotMatch)\n            }\n        }\n    }\n\n    return(\n        <div className='root'>\n            <form className=\"form\" onSubmit={handleSubmit}>\n                <Box\n                    display='flex'\n                    justifyContent='center'\n                    alignItems='center'\n                    flexDirection='column'\n                    maxWidth={640}\n                    margin='auto'\n                    padding={5}\n                    borderRadius={5}\n                    boxShadow={'5px 5px 10px #ccc'}\n                >\n                    {\n                        location.pathname === '/login'\n                            ? <LoginPage\n                                setEmail={setEmail}\n                                setPassword={setPassword}\n                                navigate={navigate}\n                            /> : location.pathname === '/register'\n                                ? <RegisterPage\n                                    setEmail={setEmail}\n                                    setPassword={setPassword}\n                                    setRepeatPassword={ setRepeatPassword}\n                                    setFirstName={setFirstName}\n                                    setUsername={setUsername}\n                                    navigate={navigate}\n                                />\n                                : null\n                    }\n                </Box>\n            </form>\n        </div>\n    )\n};\n\nexport default AuthRootComponent;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAO,OAAO;AACtC,SAAQC,WAAW,EAAEC,WAAW,QAAO,kBAAkB;AACzD,OAAOC,SAAS,MAAM,SAAS;AAC/B,OAAOC,YAAY,MAAM,YAAY;AACrC,OAAO,cAAc;AACrB,SAAQC,GAAG,QAAO,eAAe;AACjC,SAAQC,QAAQ,QAAO,mBAAmB;AAC1C,SAAQC,cAAc,QAAO,kBAAkB;AAC/C,SAAQC,KAAK,QAAO,wBAAwB;AAC5C,SAAQC,SAAS,QAAO,qBAAqB;AAAC;AAE9C,MAAMC,iBAA2B,GAAG,MAAmB;EAAA;EACnD,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACa,QAAQ,EAAEC,WAAW,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACe,cAAc,EAAEC,iBAAiB,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EACxD,MAAM,CAACiB,SAAS,EAAEC,YAAY,CAAC,GAAGlB,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACmB,QAAQ,EAAEC,WAAW,CAAC,GAAGpB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAMqB,QAAQ,GAAGpB,WAAW,EAAE;EAC9B,MAAMqB,QAAQ,GAAGf,cAAc,EAAE;EACjC,MAAMgB,QAAQ,GAAGrB,WAAW,EAAE;EAG9B,MAAMsB,YAAY,GAAG,MAAOC,CAAkC,IAAK;IAC/DA,CAAC,CAACC,cAAc,EAAE;IAClB,IAAIL,QAAQ,CAACM,QAAQ,KAAK,QAAQ,EAAE;MAChC,IAAI;QACA,MAAMC,QAAQ,GAAG;UACbjB,KAAK;UACLE;QACJ,CAAC;QACD,MAAMgB,IAAI,GAAG,MAAMvB,QAAQ,CAACwB,IAAI,CAAC,YAAY,EAAEF,QAAQ,CAAC;QACxD,MAAMN,QAAQ,CAACd,KAAK,CAACqB,IAAI,CAACE,IAAI,CAAC,CAAC;QAChCR,QAAQ,CAAC,GAAG,CAAC;MACjB,CAAC,QAAOE,CAAC,EAAE;QACP,OAAOA,CAAC;MACZ;IACJ,CAAC,MAAM;MACH,IAAIZ,QAAQ,KAAKE,cAAc,EAAE;QAC7B,IAAI;UACA,MAAMa,QAAQ,GAAG;YACbX,SAAS;YACTE,QAAQ;YACRR,KAAK;YACLE;UACJ,CAAC;UACD,MAAMmB,OAAO,GAAG,MAAM1B,QAAQ,CAACwB,IAAI,CAAC,eAAe,EAAEF,QAAQ,CAAC;UAC9D,MAAMN,QAAQ,CAACd,KAAK,CAACwB,OAAO,CAACD,IAAI,CAAC,CAAC;UACnCR,QAAQ,CAAC,GAAG,CAAC;QACjB,CAAC,QAAOE,CAAC,EAAE;UACPQ,OAAO,CAACC,GAAG,CAACT,CAAC,CAAC;UACd,OAAOA,CAAC;QACZ;MACJ,CAAC,MAAM;QACH,MAAM,IAAIU,KAAK,CAAC1B,SAAS,CAAC2B,kBAAkB,CAAC;MACjD;IACJ;EACJ,CAAC;EAED,oBACI;IAAK,SAAS,EAAC,MAAM;IAAA,uBACjB;MAAM,SAAS,EAAC,MAAM;MAAC,QAAQ,EAAEZ,YAAa;MAAA,uBAC1C,QAAC,GAAG;QACA,OAAO,EAAC,MAAM;QACd,cAAc,EAAC,QAAQ;QACvB,UAAU,EAAC,QAAQ;QACnB,aAAa,EAAC,QAAQ;QACtB,QAAQ,EAAE,GAAI;QACd,MAAM,EAAC,MAAM;QACb,OAAO,EAAE,CAAE;QACX,YAAY,EAAE,CAAE;QAChB,SAAS,EAAE,mBAAoB;QAAA,UAG3BH,QAAQ,CAACM,QAAQ,KAAK,QAAQ,gBACxB,QAAC,SAAS;UACR,QAAQ,EAAEf,QAAS;UACnB,WAAW,EAAEE,WAAY;UACzB,QAAQ,EAAES;QAAS;UAAA;UAAA;UAAA;QAAA,QACrB,GAAGF,QAAQ,CAACM,QAAQ,KAAK,WAAW,gBAChC,QAAC,YAAY;UACX,QAAQ,EAAEf,QAAS;UACnB,WAAW,EAAEE,WAAY;UACzB,iBAAiB,EAAGE,iBAAkB;UACtC,YAAY,EAAEE,YAAa;UAC3B,WAAW,EAAEE,WAAY;UACzB,QAAQ,EAAEG;QAAS;UAAA;UAAA;UAAA;QAAA,QACrB,GACA;MAAI;QAAA;QAAA;QAAA;MAAA;IAEhB;MAAA;MAAA;MAAA;IAAA;EACH;IAAA;IAAA;IAAA;EAAA,QACL;AAEd,CAAC;AAAC,GAlFIb,iBAA2B;EAAA,QAMZT,WAAW,EACXM,cAAc,EACdL,WAAW;AAAA;AAAA,KAR1BQ,iBAA2B;AAoFjC,eAAeA,iBAAiB;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}